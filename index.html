<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CaterCompare</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <link rel="stylesheet" href="css/index.css">
</head>
<body class="body">

  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-left">
        <img src="index images/logo.png" alt="Logo" class="logo">
        <a href="index.html" class="text-xl font-bold">FINVITETT23000011 Catering</a>
      </div>
      <div class="nav-center">
        <a href="comparison.html" class="nav-link">Comparison</a>
      </div>
      <div class="nav-right"></div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-banner" style="background-image: url('index images/Catering.jpg');">
      <h1 class="hero-heading">Find the Perfect Caterer for Your Event</h1>
      <p class="hero-subtext">Compare prices from catering vendors all in one place.</p>
      <div class="search-bar">
        <input type="text" id="vendor-search" placeholder="Search vendors..." class="search-input">
        <button class="search-button">Search</button>
      </div>
    </div>
  </section>

  <!-- Vendor List -->
  <section class="vendor-section">
    <h2 class="vendor-heading">Available Vendors</h2>
    <ul id="vendor-list" class="vendor-list"></ul>
  </section>

  <!-- Supabase Script -->
  <script>
    const { createClient } = supabase;
    const supabaseClient = createClient(
      'https://xkrmzydahhshvurpvkkb.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhrcm16eWRhaGhzaHZ1cnB2a2tiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ1OTU4NjgsImV4cCI6MjA2MDE3MTg2OH0.H8Am9qa-aexipyEUGgkHlzSxCCq01xZt6hs7lK31ojw'
    );

    async function loadVendors() {
      const { data, error } = await supabaseClient
        .from('menu_packages')
        .select('vendor')
        .neq('vendor', null);

      if (error) {
        console.error('Error fetching vendors:', error);
        return;
      }

      const vendors = [...new Set(data.map(pkg => pkg.vendor))];
      const list = document.getElementById('vendor-list');
      list.innerHTML = vendors.map(v => `<li class="vendor-item">${v}</li>`).join('');

      document.getElementById('vendor-search').addEventListener('input', e => {
        const term = e.target.value.toLowerCase();
        list.querySelectorAll('li').forEach(li => {
          li.style.display = li.textContent.toLowerCase().includes(term) ? '' : 'none';
        });
      });
    }

    document.addEventListener('DOMContentLoaded', loadVendors);
  </script>
</body>
</html>
